<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Patente Z - Gen Z Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/canvas-confetti/1.6.0/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        :root {
            --bg-body: #000000;
            --accent: #8b5cf6;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: white;
            height: 100dvh;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        /* Utility Scroll */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Effetto Vetro */
        .glass {
            background: rgba(20, 20, 25, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Animazioni */
        @keyframes pop { 0% { transform: scale(0.9); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .anim-pop { animation: pop 0.3s ease-out; }

        /* Tasti */
        .btn-action {
            transition: transform 0.1s, filter 0.1s;
        }
        .btn-action:active {
            transform: scale(0.95);
            filter: brightness(1.2);
        }

        /* Navigazione */
        .nav-item {
            color: #52525b;
            transition: color 0.2s, transform 0.2s;
        }
        .nav-item.active {
            color: var(--accent);
            transform: scale(1.1);
        }

        /* Livelli (Z-Index) Corretti */
        #view-home { z-index: 10; }      /* Base */
        #view-game { z-index: 20; }      /* Sopra Home */
        #view-pattern { z-index: 20; }   /* Sopra Home */
        #view-selection { z-index: 30; } /* Modale sopra tutto */

        /* Transizioni Viste */
        .view-section {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: #000000;
        }

        /* SVG Segnali */
        .sign-svg {
            height: 100px;
            width: auto;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
            margin: 0 auto 10px auto;
        }
    </style>
</head>
<body class="flex flex-col h-full w-full max-w-md mx-auto shadow-2xl relative bg-black">

    <!-- HEADER -->
    <header class="flex-none h-16 flex justify-between items-center px-6 bg-black/80 backdrop-blur-md z-40 border-b border-white/5 relative">
        <div class="flex flex-col">
            <h1 class="text-xl font-black bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600">PATENTE Z</h1>
            <span id="header-mode" class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Home</span>
        </div>
        <div class="px-3 py-1 bg-white/5 rounded-full border border-white/10 flex items-center gap-2">
            <span class="text-green-400 text-xs">üî•</span>
            <span id="streak-display" class="font-mono text-sm font-bold">0</span>
        </div>
    </header>

    <!-- MAIN VIEWS CONTAINER -->
    <main class="flex-1 relative w-full overflow-hidden bg-black">

        <!-- 1. VIEW: HOME (Base Layer) -->
        <div id="view-home" class="view-section absolute inset-0 flex flex-col p-6 overflow-y-auto no-scrollbar transform translate-x-0">
            <div class="mt-4 mb-8">
                <h2 class="text-3xl font-black text-white mb-2 leading-tight">Ciao!<br><span class="text-purple-500">Iniziamo?</span></h2>
                <p class="text-gray-400 text-sm">Scegli come vuoi allenarti oggi.</p>
            </div>

            <div class="grid gap-4">
                <!-- Card Mix -->
                <button onclick="app.startMix()" class="btn-action glass p-6 rounded-3xl text-left relative overflow-hidden group border border-purple-500/20">
                    <div class="absolute right-4 top-4 p-2 bg-purple-500/10 rounded-full">
                        <i class="ph-fill ph-shuffle text-2xl text-purple-500"></i>
                    </div>
                    <div class="relative z-10 pt-4">
                        <h3 class="text-xl font-bold text-white mb-1">Quiz Mix</h3>
                        <p class="text-xs text-gray-400">Domande casuali da tutto il listato.</p>
                    </div>
                </button>

                <!-- Card Studio -->
                <button onclick="app.goToSelection()" class="btn-action glass p-6 rounded-3xl text-left relative overflow-hidden group border border-blue-500/20">
                    <div class="absolute right-4 top-4 p-2 bg-blue-500/10 rounded-full">
                        <i class="ph-fill ph-student text-2xl text-blue-500"></i>
                    </div>
                    <div class="relative z-10 pt-4">
                        <h3 class="text-xl font-bold text-white mb-1">Focus Studio</h3>
                        <p class="text-xs text-gray-400">Seleziona argomenti specifici.</p>
                    </div>
                </button>

                <!-- Card Muro -->
                <button onclick="app.goToPattern()" class="btn-action glass p-6 rounded-3xl text-left relative overflow-hidden group border border-green-500/20">
                    <div class="absolute right-4 top-4 p-2 bg-green-500/10 rounded-full">
                        <i class="ph-fill ph-wall text-2xl text-green-500"></i>
                    </div>
                    <div class="relative z-10 pt-4">
                        <h3 class="text-xl font-bold text-white mb-1">Muro Pattern</h3>
                        <p class="text-xs text-gray-400">Tutte le risposte a colpo d'occhio.</p>
                    </div>
                </button>
            </div>
        </div>

        <!-- 2. VIEW: GAME (Overlay Layer) -->
        <div id="view-game" class="view-section absolute inset-0 flex flex-col px-4 pb-4 pt-2 transform translate-x-full">
            
            <!-- Progress -->
            <div class="h-1 w-full bg-gray-900 rounded-full mb-4 overflow-hidden mt-2">
                <div id="progress-bar" class="h-full bg-purple-500 w-0 transition-all duration-300"></div>
            </div>

            <!-- Card -->
            <div id="card-container" class="flex-1 glass rounded-3xl p-4 flex flex-col items-center justify-center text-center relative overflow-hidden mb-4 shadow-2xl">
                
                <!-- Feedback Flash Layer (Trasparente, non opaco) -->
                <div id="feedback-flash" class="absolute inset-0 z-50 hidden flex-col items-center justify-center transition-all duration-200 pointer-events-none">
                    <i id="fb-icon" class="text-8xl mb-2 drop-shadow-2xl filter"></i>
                    <span id="fb-text" class="text-4xl font-black uppercase tracking-widest drop-shadow-2xl"></span>
                </div>

                <div class="w-full flex flex-col h-full justify-center">
                    <!-- Top: Root & Image -->
                    <div class="flex-none flex flex-col items-center justify-center border-b border-white/5 pb-6 mb-6">
                        <div id="signal-container" class="hidden mb-4"></div>
                        <p id="card-root" class="text-gray-400 text-sm font-semibold uppercase tracking-wide leading-snug">...</p>
                    </div>
                    
                    <!-- Center: Question -->
                    <div class="flex-1 flex items-center justify-center">
                        <p id="card-comp" class="text-2xl md:text-3xl font-bold text-white leading-tight">
                            Caricamento...
                        </p>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="h-24 grid grid-cols-2 gap-4">
                <button onclick="app.answer(false)" class="btn-action rounded-2xl bg-[#1a1010] border border-red-900/40 text-red-500 flex flex-col items-center justify-center shadow-lg">
                    <i class="ph-bold ph-x text-3xl mb-1"></i>
                    <span class="font-bold tracking-widest">FALSO</span>
                </button>
                <button onclick="app.answer(true)" class="btn-action rounded-2xl bg-[#0f1a15] border border-green-900/40 text-green-500 flex flex-col items-center justify-center shadow-lg">
                    <i class="ph-bold ph-check text-3xl mb-1"></i>
                    <span class="font-bold tracking-widest">VERO</span>
                </button>
            </div>
            
            <div id="game-topic" class="text-center mt-2 text-[10px] text-gray-500 truncate h-4 font-mono uppercase"></div>
        </div>

        <!-- 3. VIEW: PATTERN (Overlay Layer) -->
        <div id="view-pattern" class="view-section absolute inset-0 flex flex-col p-6 transform translate-x-full overflow-y-auto no-scrollbar">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">Muro Pattern</h2>
                <button onclick="app.goToHome()" class="p-2 bg-white/10 rounded-full"><i class="ph-bold ph-x text-white"></i></button>
            </div>
            <div id="pattern-content" class="space-y-6 pb-24"></div>
        </div>

        <!-- 4. VIEW: SELECTION (Modal Layer) -->
        <div id="view-selection" class="view-section absolute inset-0 flex flex-col p-6 transform translate-x-full">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Seleziona Argomenti</h2>
                <button onclick="app.goToHome()" class="text-xs text-gray-500 font-bold uppercase p-2">Annulla</button>
            </div>
            <div id="selection-list" class="flex-1 overflow-y-auto no-scrollbar space-y-2 pb-24 pr-2">
                <!-- Checkboxes generated here -->
            </div>
            <div class="absolute bottom-6 left-6 right-6">
                <button onclick="app.startCustom()" class="w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl font-bold text-white shadow-xl btn-action text-lg">
                    INIZIA SESSIONE
                </button>
            </div>
        </div>

    </main>

    <!-- BOTTOM NAV -->
    <nav class="h-20 bg-black border-t border-white/5 flex justify-around items-start pt-4 z-50 pb-safe">
        <button onclick="app.goToHome()" id="nav-home" class="nav-item flex flex-col items-center gap-1 w-16 active">
            <i class="ph-fill ph-house text-2xl"></i>
            <span class="text-[10px] font-bold">Home</span>
        </button>
        <button onclick="app.resumeGame()" id="nav-game" class="nav-item flex flex-col items-center gap-1 w-16">
            <i class="ph-fill ph-play-circle text-2xl"></i>
            <span class="text-[10px] font-bold">Game</span>
        </button>
        <button onclick="app.goToPattern()" id="nav-pattern" class="nav-item flex flex-col items-center gap-1 w-16">
            <i class="ph-fill ph-wall text-2xl"></i>
            <span class="text-[10px] font-bold">Muro</span>
        </button>
    </nav>

    <!-- DATA & LOGIC -->
    <script>
        // --- 1. DATA PARSING ---
        const RAW_TEXT = `
Listato A B 2026
Metodo: Pattern Matching
Lezione: 01.1 Definizioni stradali e di traffico
Argomento: La strada
La strada √®...
[ F ] ...riservata alla circolazione dei soli autoveicoli e motocicli
[ V ] ...aperta alla circolazione dei pedoni, degli animali e dei veicoli
[ F ] ...qualsiasi area asfaltata, limitata lateralmente dagli attraversamenti pedonali 
[ F ] ‚Ä¶normalmente riservata alla circolazione dei soli veicoli e animali
La strada pu√≤...
[ V ] ...comprendere le piste ciclabili
[ V ] ...essere suddivisa in carreggiate
[ V ] ...essere a doppio senso di circolazione
[ V ] ...essere a senso unico di circolazione
La strada non comprende...
[ F ] ...i marciapiedi
[ F ] ...le banchine
Argomento: La carreggiata
La carreggiata √®...
[ F ] ...destinata soltanto alla circolazione di carri a trazione animale
[ V ] ...la parte della strada destinata normally alla circolazione dei veicoli
[ F ] ...destinata alla sosta degli autocarri
[ F ] ...la traccia lasciata dalle ruote dei veicoli sulle strade innevate
[ F ] ...destinata alla sosta di emergenza
La carreggiata pu√≤...
[ V ] ...essere a senso unico di circolazione
[ V ] ...essere suddivisa in corsie
[ V ] ...essere a doppio senso di circolazione
Fanno parte della carreggiata...
[ V ] ...le corsie di sorpasso
[ V ] ...le corsie di marcia
[ V ] ...gli attraversamenti pedonali
[ V ] ...gli attraversamenti ciclabili
[ F ] ...i marciapiedi
[ F ] ...le banchine
[ F ] ...le corsie di emergenza delle autostrade
La carreggiata non comprende...
[ V ] ...non comprende le piste ciclabili
[ V ] ...non comprende i marciapiedi 
[ F ] ...comprende le piazzole di sosta
Argomento: La corsia
La corsia √®...
[ V ] ...limitata da strisce continue o discontinue
[ V ] ...una parte della carreggiata che consente la circolazione di una sola fila di veicoli
[ F ] ...formata da due carreggiate
[ F ] ...una strada a scorrimento veloce
[ F ] ...destinata solo al transito dei pedoni
[ F ] ...una pista riservata alle vetture da corsa
La corsia pu√≤...
[ F ] ...essere a doppio senso di circolazione
[ V ] ...essere destinata alla normale marcia dei veicoli
[ V ] ...essere destinata ad effettuare sorpassi
[ V ] ...essere destinata al rallentamento dei veicoli in uscita dalle autostrade
[ V ] ...essere destinata alle soste di emergenza, in caso di guasto o malessere
[ V ] ...essere riservata ai veicoli che intendono svoltare (corsia specializzata)
[ V ] ...essere riservata alla circolazione di alcune categorie di veicoli (taxi, autobus, ecc.)
[ V ] ...essere di accelerazione
[ V ] ...essere di decelerazione
La corsia di accelerazione...
[ V ] ...facilita l'ingresso dei veicoli in autostrada o su strade extraurbane principali
[ V ] ...serve ad entrare correttamente in autostrada
[ F ] ...serve per abbandonare la carreggiata dell‚Äôautostrada ed entrare in un‚Äôarea di sosta
[ V ] ...serve per rientrare sulla carreggiata dell‚Äôautostrada dopo che si √® usciti da un‚Äôarea di servizio
[ V ] ...viene utilizzata per aumentare la velocit√†
[ F ] ...serve per uscire da una piazzola di sosta
[ F ] ...pu√≤ essere utilizzata per il sorpasso
La corsia di decelerazione...
[ V ] ...facilita l'uscita dei veicoli dall'autostrada
[ F ] ...pu√≤ essere utilizzata per la sosta dei veicoli
[ V ] ...serve per uscire correttamente da una strada extraurbana principale
[ V ] ...serve per uscire dalla carreggiata dell‚Äôautostrada ed entrare nell‚Äôarea di servizio
[ F ] ...serve ad entrare in autostrada
[ F ] ...serve per entrare in una piazzola di sosta
Fuori dai centri abitati...
[ F ] ...su una stessa corsia possono circolare affiancati due ciclomotori
Nei centri abitati...
[ F ] ...su una stessa corsia possono circolare affiancati due motocicli
Le corsie possono...
[ V ] ...essere vietate a taluni tipi di veicoli
L'ente proprietario della strada pu√≤...
[ V ] ...imporre che su una corsia i veicoli transitino ad una velocit√† minima obbligatoria
Argomento: Intersezioni a raso e a livelli sfalsati
L'intersezione (incrocio) a raso...
[ V ] ...richiede di fare attenzione ai veicoli provenienti dalle strade che si incrociano
[ V ] ...√® un'intersezione di due o pi√π strade poste allo stesso livello
[ F ] ...√® un incrocio fra una strada statale e un passo carrabile
[ F ] ...√® un passaggio a livello dotato di barriere o semibarriere
[ F ] ...√® un incrocio fra una strada statale e i binari del tram
[ V ] ...pu√≤ essere regolata da semaforo
[ F ] ...√® un'intersezione a livelli sfalsati
[ F ] ...√® un insieme di sovrappassi, sottopassi e rampe
Nell'intersezione (incrocio) a...
[ V ] ...raso due o pi√π strade si incrociano allo stesso livello
[ F ] ...livelli sfalsati non valgono i limiti massimi generali di velocit√†
L'intersezione (incrocio) a livelli sfalsati...
[ V ] ...√® munita di infrastrutture (rampe, sovrappassi, sottopassi) per il collegamento fra strade poste a livelli diversi
[ V ] ...comprende strade situate ad altezze diverse
[ V ] ...facilita la circolazione, perch√© esclude l'incrocio diretto fra i veicoli
[ V ] ...comprende rampe, sovrappassi o sottopassi
[ F ] ...√®, di norma, regolata da semafori
[ F ] ...un incrocio a raso fra una strada e i binari del treno
Argomento: Passaggi a livello ed attraversamenti Tranviari
In un passaggio a livello si possono trovare...
[ V ] ...le luci rosse
[ V ] ...le semibarriere
[ V ] ...le barriere
[ F ] ...le corsie di accelerazione
[ F ] ...le luci gialle lampeggianti
Il passaggio a livello √®...
[ F ] ...un passo carrabile
[ F ] ...caratterizzato dalla presenza di un attraversamento autostradale
[ F ] ...caratterizzato dalla presenza di un sottopassaggio
[ F ] ...un cavalcavia ferroviario o tranviario
In un passaggio a livello si pu√≤ trovare...
[ V ] ...la croce di S. Andrea
[ V ] ...un dispositivo di segnalazione acustica
In vicinanza di un passaggio a livello...
[ V ] ...si trovano i pannelli distanziometrici
Bisogna lasciare liberi...
[ V ] ...i passaggi a livello e i binari del tram anche in caso di traffico intenso
Argomento: Banchine e marciapiedi
La banchina √®...
[ F ] ...riservata ai veicoli lenti, nelle strade in salita
[ V ] ...parte della strada, situata oltre la linea bianca continua di margine della carreggiata
[ V ] ...parte della strada, posta al di fuori della carreggiata
[ F ] ...parte della carreggiata, destinata alla sosta dei veicoli
Sulle banchine...
[ F ] ...la sosta dei veicoli √® consentita per un massimo di 5 ore
La banchina non consente...
[ V ] ...di norma, il transito ai veicoli
Il marciapiede √®...
[ V ] ...una parte della strada riservata, di norma, ai pedoni
[ V ] ...una parte della strada, rialzata o delimitata in altro modo, riservata ai pedoni
[ F ] ...una parte della strada dove, di norma, √® consentita la sosta dei ciclomotori
[ V ] ...una parte della strada, al di fuori della carreggiata, destinata alla circolazione dei pedoni
[ F ] ...una parte della carreggiata
[ F ] ...una parte della strada riservata anche alle biciclette
[ F ] ...riservato ai pedoni e ai veicoli in sosta, qualora non sia rialzato
Il marciapiede consente...
[ V ] ...la sosta dei veicoli solo in presenza di apposite strisce di parcheggio
Il conducente del motociclo...
[ F ] ...pu√≤ circolare sul marciapiede se il traffico sulla carreggiata √® bloccato
Argomento: Attraversamenti pedonali e ciclabili
L'attraversamento pedonale √®...
[ V ] ...una parte della carreggiata, in cui i veicoli devono dare la precedenza ai pedoni, che attraversano sulle apposite strisce
[ V ] ...una parte della carreggiata destinata al transito dei pedoni che attraversano
[ F ] ...posto al di fuori della carreggiata ed √® destinato al transito dei pedoni
[ F ] ...una parte della carreggiata vietata al transito dei veicoli
[ F ] ...una parte della strada, separata dalla carreggiata mediante una striscia gialla
[ V ] ...una parte della carreggiata sulla quale √® vietata la sosta dei veicoli
[ V ] ...una parte della carreggiata sulla quale √® vietata la fermata dei veicoli
[ F ] ...una parte della carreggiata in cui √® consentita la fermata ma non la sosta dei veicoli
L'attraversamento pedonale non fa parte...
[ F ] ...della carreggiata
L'uso corretto della strada comporta che...
[ V ] ...si dia la precedenza ai pedoni che attraversano sugli attraversamenti pedonali
[ F ] ...ci si arresti sempre ai passaggi pedonali ripartendo solo se non sopraggiungono pedoni
L'attraversamento pedonale viene segnalato...
[ V ] ...con strisce bianche parallele
Bisogna lasciare liberi...
[ V ] ...gli attraversamenti pedonali e quelli ciclabili in caso di formazione di code di veicoli
Argomento: Passo carrabile, Piazzola di Sosta, Parcheggio
Il passo carrabile √®...
[ F ] ...una strada riservata ai carri trainati da animali
[ F ] ...una strada riservata agli autocarri
[ F ] ...un segnale che impone la circolazione rotatoria su una piazza
[ F ] ...un salvagente circolare per i pedoni
[ F ] ...un parcheggio scambiatore
[ V ] ...una zona per l‚Äôaccesso dei veicoli alle propriet√† laterali alla strada
Il passo carrabile consente...
[ V ] ...ai veicoli di accedere alle propriet√† private laterali alla strada (garage, cortili, ecc.)
Il passo carrabile permette...
[ V ] ...ai veicoli che circolano su una strada pubblica di accedere ad un'area laterale adibita alla sosta
Il passo carrabile deve essere...
[ V ] ...corredato da apposito segnale, che riporti l'ente e il numero di autorizzazione
In corrispondenza del passo carrabile...
[ F ] ...√® consentita la sosta
[ V ] ...√® consentita la fermata
Argomento: Isola di traffico e Salvagente
L'isola di traffico √®...
[ F ] ...una zona destinata al parcheggio dei veicoli
[ F ] ...posta al di fuori della strada
[ F ] ...una piazzola di sosta per i veicoli
[ F ] ...un'area pedonale urbana
[ F ] ...corrisponde, in genere, al centro storico della citt√†
[ F ] ...una piazzola per effettuare l'inversione di marcia
[ F ] ...una parte della strada sulla quale √® consentito il transito dei ciclomotori
[ F ] ...la parte della citt√† con maggiore traffico
[ V ] ...una parte della strada sulla quale √® vietato il transito dei veicoli
[ V ] ...una parte della strada sulla quale √® vietato il transito dei motocicli
L'isola di traffico serve...
[ F ] ...per la fermata dei veicoli
[ F ] ...a separare la carreggiata dalla banchina
[ F ] ...per il transito dei pedoni
[ V ] ...a facilitare l'incanalamento dei veicoli verso varie direzioni
L'isola di traffico pu√≤ essere...
[ F ] ...percorsa solo dai taxi e dagli autobus urbani
[ V ] ...a raso o in rilievo (rialzata)
L'isola di traffico viene evidenziata...
[ V ] ...mediante zebrature di colore bianco
L'isola di traffico a raso...
[ V ] ...√® costituita da zebrature di colore bianco
L'isola di traffico facilita...
[ F ] ...la salita e la discesa di passeggeri da tram, filobus e autobus
L'isola di traffico, se rialzata...
[ V ] ...√® preceduta da zebrature di colore bianco
L'isola di traffico √® delimitata...
[ V ] ...da strisce bianche continue
Il salvagente √®...
[ F ] ...una persona preposta al primo soccorso
[ F ] ...un itinerario ciclopedonale
Il salvagente facilita...
[ V ] ...la salita e la discesa dei passeggeri da tram, filobus o autobus
Il salvagente, posto in corrispondenza...
[ V ] ...di attraversamenti pedonali, serve anche al riparo o alla sosta dei pedoni che attraversano la strada
Il salvagente pu√≤ essere segnalato...
[ V ] ...da colonnine luminose a luce gialla fissa
Il salvagente serve a...
[ F ] ...incanalare i veicoli in varie direzioni
[ F ] ...dividere i sensi di marcia in una strada a doppio senso di circolazione
Argomento: Zona a traffico limitato e Area Pedonale
Una zona a traffico limitato √®...
[ F ] ...un'area nella quale √® consentito solo il transito di ciclomotori e biciclette
[ F ] ...un'area vietata al transito dei pedoni durante le ore notturne
[ V ] ...delimitata da appositi segnali stradali di inizio e di fine
[ F ] ...un'area sempre vietata al transito dei veicoli a motore
[ V ] ...un'area nella quale pu√≤ essere limitata la circolazione solo a particolari categorie di utenti
[ V ] ...un'area nella quale pu√≤ essere limitata la circolazione solo di particolari categorie di veicoli
[ V ] ...un'area in cui pu√≤ essere limitata la circolazione dei veicoli solo in alcune ore
In una zona a traffico limitato...
[ V ] ...possono circolare solo i veicoli autorizzati
[ F ] ...non possono entrare pi√π di un certo numero di veicoli
Nelle aree pedonali...
[ F ] ...i ciclomotori possono transitare solo di giorno
[ V ] ...possono transitare i pedoni
[ F ] ...possono transitare i quadricicli a motore, purch√© non superino la velocit√† di 50 km/h
[ F ] ...possono transitare i trattori stradali, con velocit√† non superiore a 30 km/h
[ F ] ...possono transitare tutti gli autoveicoli, ma con prudenza
[ F ] ...possono transitare tutti i motocicli, purch√© diano la precedenza ai pedoni
[ V ] ...possono transitare i veicoli al servizio di persone diversamente abili
[ V ] ...possono transitare le biciclette
[ V ] ...possono transitare gli autoveicoli dei vigili del fuoco, con luce lampeggiante blu e sirena in funzione
[ V ] ...possono transitare i veicoli della polizia, con sirena e luce lampeggiante blu in funzione
[ V ] ...possono transitare i veicoli ad emissione zero (elettrici), se espressamente consentito
Lezione: 01.2 Doveri del conducente
Argomento: Divieti generali 
Spostare la segnaletica...
[ V ] ...stradale pu√≤ comportare pericolo grave per gli altri utenti della strada
√à vietato...
[ V ] ...spostare o imbrattare la segnaletica stradale
[ V ] ...rimuovere la segnaletica stradale
[ V ] ... danneggiare le opere e gli impianti stradali
[ V ] ...sporcare la carreggiata depositando rifiuti
[ V ] ...gettare oggetti e rifiuti dai veicoli in movimento
[ F ] ...parcheggiare nelle zone residenziali
[ V ] ...lanciare dal finestrino mozziconi di sigaretta accesi
[ V ] ...spargere fango o detriti sulle strade con le ruote sporche dei veicoli
[ V ] ...immettersi sulle strade con le ruote del veicolo sporche di fango
E' consentito spostare...
[ F ] ...la segnaletica stradale, se si tratta delle barriere di delimitazione o dei coni stradali
[ F ] ...la segnaletica stradale, se non si tratta di segnali di pericolo
[ F ] ...la segnaletica stradale, dopo aver avvisato gli organi di polizia
[ F ] ...i segnali stradali verticali temporanei per parcheggiare il veicolo
Il conducente pu√≤...
[ F ] ...lanciare oggetti dal finestrino sulla banchina
[ F ] ...superare i veicoli in coda accelerando bruscamente e cambiando ripetutamente corsia
E' consentito lanciare...
[ F ] ...la carta dal finestrino
Su tutte le strade...
[ F ] ...√® vietato il transito dei veicoli che superano 10 m di lunghezza
[ F ] ...√® vietato esercitarsi alla guida
[ F ] ...sono vietati gli avvisatori acustici (clacson, trombe)
Gettare mozziconi...
[ V ] ...accesi dai finestrini in prossimit√† di boschi o aree verdi potrebbe causare incendi
[ V ] ...di sigaretta accesi dai finestrini √® molto pericoloso soprattutto se sopraggiungono veicoli a due ruote
Sulle strade pubbliche sono consentite...
[ F ] ...le gare di velocit√†, anche se non autorizzate, dalle ore 23.00 alle ore 6.00
[ F ] ...le gare di velocit√†, anche se non autorizzate, tra motocicli e non tra autoveicoli
Sono consentite le gare di velocit√†...
[ F ] ...anche se non autorizzate, purch√© partecipino solo due autovetture
Le competizioni sportive...
[ F ] ...con veicoli su aree pubbliche sono consentite senza autorizzazione
√à punito con la reclusione...
[ V ] ...il conducente che gareggia in velocit√† su strade pubbliche
[ V ] ...chi scommette su veicoli che partecipano a gare di velocit√† non autorizzate su strade pubbliche
[ V ] ...il conducente che partecipa a gare di velocit√† non autorizzate su aree pubbliche
Sulle strade √® vietato gareggiare...
[ V ] ...in velocit√†
Il conducente che si accorge...
[ V ] ...che il suo veicolo perde olio deve compiere tutte le azioni necessarie per evitare pericoli per altri utenti
[ V ] ...che il suo veicolo ha forti perdite di olio o carburante, deve immediatamente avvisare l‚Äôente proprietario della strada o gli organi di polizia
Uscendo da un sentiero fangoso...
[ V ] ...o da un cantiere, bisogna assicurarsi che durante la marcia non cada terriccio che possa sporcare la strada
Per evitare di sporcare...
[ V ] ...la carreggiata, bisogna pulire le ruote del veicolo, prima di uscire da un sentiero fangoso
Se, uscendo da un sentiero fangoso...
[ V ] ...si sporca notevolmente la strada, si pu√≤ incorrere in una sanzione amministrativa
Su una strada ricoperta...
[ F ] ...da brecciolino il conducente pu√≤ circolare a velocit√† sostenuta
Alla guida di un veicolo...
[ V ] ...il conducente deve procedere a bassa velocit√† sopra le pozzanghere
Argomento: Convivenza Civile
Entrando in un centro abitato...
[ V ] ...bisogna tenere conto che pu√≤ cambiare spesso la precedenza agli incroci
[ V ] ...bisogna continuare a mantenere la concentrazione alla guida anche se potrebbero aumentare i motivi per distrarsi
[ F ] ...bisogna considerare che √® possibile sostare in corrispondenza di incroci non regolati
[ V ] ...bisogna tenere conto che il flusso della circolazione viene spesso intralciato o interrotto da veicoli che sono fermi, che partono o che cambiano direzione
Entrati in un centro abitato...
[ V ] ...bisogna tenere conto che gli altri utenti della strada (quali pedoni e ciclisti) si mescolano maggiormente con il traffico motorizzato
Il conducente di un veicolo...
[ F ] ...pu√≤ approfittare della potenza del proprio veicolo per non dare la precedenza a chi spetta
[ F ] ...di grandi dimensioni ha, di norma, la precedenza sul conducente di un veicolo pi√π piccolo
[ F ] ...pu√≤ fare a meno di usare la massima prudenza quando si avvicina ad un incrocio in cui ha il diritto di precedenza
[ V ] ...oltre a rispettare le norme specifiche della circolazione, deve tenere un rapporto corretto e tollerante verso gli altri utenti della strada
[ V ] ...deve essere paziente e tollerante anche in caso di rallentamento della circolazione
[ V ] ...deve tutelare la propria e l'altrui sicurezza
[ V ] ...deve cercare di prevedere il comportamento degli altri utenti
[ V ] ...non deve fare sempre affidamento sul comportamento degli altri, che pu√≤ non essere corretto
[ V ] ...diverso dai taxi non pu√≤ sostare nei posteggi riservati ai taxi
[ F ] ...diverso dai taxi pu√≤ sostare nei posteggi riservati ai taxi dalle ore 20.00 alle ore 8.00
Il conducente deve...
[ F ] ...dare segni di impazienza, se il veicolo che sta davanti procede troppo lentamente
[ F ] ...concentrarsi prevalentemente sul tratto di strada non superiore a tre metri antistante il suo veicolo
In un centro abitato...
[ F ] ...√® sempre consentita la marcia per file parallele
[ V ] ...bisogna essere pi√π attenti, prudenti e tolleranti, a causa del maggior numero di utenti che interagiscono nell'ambiente urbano
[ F ] ...bisogna considerare che i pedoni e i diversamente abili devono sempre dare la precedenza ai veicoli a motore
Quando si viaggia in fila...
[ V ] ...con altri veicoli, non bisogna limitarsi a osservare solamente il veicolo che precede, ma occorre porre attenzione anche in lontananza, per controllare la situazione del traffico
[ V ] ...con altri veicoli, bisogna mantenere ugualmente la distanza di sicurezza
[ V ] ...con altri veicoli, √® opportuno non avvicinarsi troppo al veicolo che precede
[ F ] ...con altri veicoli √® consentito distrarsi se si √® a bassa velocit√†
[ F ] ...con altri veicoli, √® opportuno tenere sempre accese le luci di emergenza
[ F ] ...con altri veicoli, √® opportuno spostarsi al centro della carreggiata, per controllare la situazione del traffico
[ F ] ...con altri veicoli, √® opportuno spostarsi il pi√π possibile a sinistra, per creare una corsia libera a destra
Anche in condizioni di scarsa visibilit√†...
[ F ] ...quando si viaggia dietro ad un veicolo che solleva polvere, conviene sorpassarlo subito
Un incidente...
[ V ] ...anche a bassa velocit√†, potrebbe creare gravi problemi fisici a pedoni, ciclisti e motociclisti, se coinvolti
[ F ] ...a bassa velocit√† non crea problemi di incolumit√† ai conducenti coinvolti
Lezione: 01.3 Definizioni e Classificazione dei Veicoli
Argomento: Ciclomotori
I ciclomotori...
[ V ] ...sono soggetti a revisione dopo quattro anni dalla prima immatricolazione, successivamente ogni due anni
[ V ] ...possono avere due o tre ruote
[ F ] ...non sono soggetti a revisione periodica
[ F ] ...non hanno pi√π di due ruote
[ F ] ...possono circolare alla velocit√† di 60 km/h fuori dai centri urbani
[ F ] ...per essere definiti tali, devono essere muniti di cambio manuale
[ V ] ...a due ruote non possono avere un motore termico di cilindrata superiore a 50 cm3
[ V ] ...non rientrano nella categoria dei motocicli
I veicoli a due ruote...
[ V ] ...con motore termico fino a 50 cm3 di cilindrata e velocit√† massima di 45 km/h sono ciclomotori
Non tutti i veicoli a motore...
[ V ] ...a due ruote vengono classificati ciclomotori
Si definiscono ciclomotori tutti i veicoli...
[ F ] ...a due ruote di cilindrata superiore a 50 cm3
Le biciclette con pedalata assistita...
[ F ] ...dotate di motore elettrico ausiliario di potenza massima fino a 0,25 kW, sono definite ciclomotori
E' consentito...
[ F ] ...aumentare la cilindrata dei quadricicli leggeri purch√© non si aumenti la velocit√†
[ F ] ...sostituire il motore del quadriciclo leggero per aumentare la velocit√† massima oltre i 45 km/h
[ F ] ...sostituire il dispositivo di scarico dei quadricicli leggeri per aumentare la velocit√† massima, purch√© non si aumenti la cilindrata del motore
I quadricicli leggeri... 
[ V ] ...alimentati a benzina hanno cilindrata del motore inferiore o pari a 50 cm3
[ V ] ...ai fini della circolazione, sono assimilati ai ciclomotori 
La guida dei quadricicli non leggeri...
[ F ] ...√® consentita gi√† al compimento del quattordicesimo anno di et√†
Ai fini della circolazione i quadricicli leggeri sono assimilati...
[ F ] ...ai motocicli
Argomento: Motoveicoli
I motocicli...
[ V ] ...sono soggetti a revisione dopo quattro anni dalla prima immatricolazione, successivamente ogni due anni
[ V ] ...possono essere dotati di cambio automatico
[ V ] ...hanno cilindrata superiore a 50 cm3
[ V ] ...sono veicoli a due ruote
[ F ] ...hanno motore di cilindrata fino a 50 cm3 e sviluppano una velocit√† fino a 45 km/h
[ F ] ...sono veicoli a motore con pi√π di due ruote
Tutti i veicoli a motore con tre ruote...
[ F ] ...sono dei motocicli
Si definiscono motocicli solo i veicoli...
[ F ] ...a due ruote di cilindrata fino a 125 cm3
Il motociclo √®...
[ F ] ...un qualunque veicolo a due ruote
I tricicli a motore sono...
[ F ] ...veicoli a motore che possono essere condotti senza patente
[ V ] ...soggetti a revisione dopo quattro anni dalla prima immatricolazione, successivamente ogni due anni
[ F ] ...non soggetti a revisione periodica
[ V ] ...veicoli a motore a tre ruote simmetriche
[ F ] ...costituiti da un motociclo e un sidecar
[ V ] ...veicoli a motore aventi una velocit√† massima per costruzione superiore a 45 km/h
[ V ] ...veicoli con motore di cilindrata superiore a 50 cm3
[ F ] ...veicoli con motore di cilindrata inferiore a 50 cm3 e aventi velocit√† massima per costruzione fino a 45 km/h
I quadricicli...
[ V ] ...sono veicoli a motore a quattro ruote
[ V ] ...sono soggetti a revisione periodica
[ F ] ...non sono soggetti a revisione periodica
[ F ] ...non leggeri a manubrio e con carrozzeria aperta possono essere condotti senza casco
[ F ] ...diversi da quelli leggeri possono essere guidati senza patente
[ F ] ...non leggeri, ai fini della circolazione, sono equiparati ai ciclomotori
[ V ] ...non sono autoveicoli
La potenza dei quadricicli non leggeri √® sempre...
[ V ] ...inferiore o uguale a 15 kW
Il triciclo a motore √®...
[ F ] ...un autoveicolo
Argomento: Autoveicoli
Gli autoveicoli sono...
[ F ] ...tutti i veicoli con almeno due ruote
[ F ] ...tutti i veicoli con almeno quattro ruote, compresi quelli senza motore
[ V ] ...veicoli a motore con almeno quattro ruote, esclusi i quadricicli
[ F ] ...tutti i veicoli a motore con quattro o pi√π ruote, compresi i quadricicli
L'autoveicolo √®...
[ F ] ...un qualunque veicolo adibito al trasporto di merce
[ F ] ...un qualunque veicolo a motore
[ V ] ...un veicolo a motore con non meno di quattro ruote, eccetto i quadricicli
Le autovetture...
[ V ] ...possono avere motore elettrico 
[ V ] ...sono soggette a revisione periodica
[ F ] ...sono soggette a revisione ogni cinque anni 
[ F ] ...non possono trainare carrelli-appendice o rimorchi
L'autovettura...
[ F ] ...√® un veicolo con dieci posti in totale, compreso il conducente
[ V ] ...√® un veicolo a motore con quattro ruote, destinato al trasporto di massimo nove persone, compreso il conducente 
[ V ] ...fa parte degli autoveicoli 
[ F ] ...pu√≤ avere al massimo, cinque posti 
[ V ] ...non pu√≤ avere pi√π di nove posti, compreso il conducente
Vengono definite autovetture tutti i veicoli...
[ F ] ...con motore anteriore
Si definiscono autovetture tutti i veicoli...
[ F ] ...a motore che hanno la trazione posteriore
Si definisce autovettura il veicolo...
[ F ] ...blindato e appositamente attrezzato per il trasporto di valori
Le autocaravan (camper) sono...
[ F ] ...veicoli destinati ai lavori agricoli
[ V ] ...veicoli aventi una speciale carrozzeria per essere adibiti al trasporto ed all'alloggio al massimo del numero di persone indicato nella carta di circolazione
[ V ] ...veicoli aventi una speciale carrozzeria per essere adibiti al trasporto ed all'alloggio di persone
[ F ] ...veicoli destinati alla costruzione e alla manutenzione di opere stradali
[ V ] ...veicoli attrezzati permanentemente per essere adibiti al trasporto ed all'alloggio di persone
[ F ] ...rimorchi
[ V ] ...soggette a revisione periodica
[ F ] ...soggette a revisione ogni cinque anni
Sulle autocaravan (camper) √® possibile viaggiare...
[ F ] ...in piedi, solo per brevi tratti
L'autobus...
[ V ] ...viene classificato autoveicolo 
[ V ] ...non √® un'autovettura 
L'autocarro √®...
[ V ] ...un autoveicolo
[ F ] ...un'autovettura
Argomento: Macchine agricole e Macchine Operatrici
Sulle macchine agricole e sui loro rimorchi √® consentito...
[ F ] ...il trasporto di persone in piedi
Le macchine agricole...
[ V ] ...possono essere a ruote o a cingoli
[ F ] ...possono trasportare fino a quattro passeggeri
[ V ] ...possono essere semoventi o trainate
[ V ] ...possono circolare su strada per il proprio trasferimento se immatricolate
[ V ] ...a ruote o a cingoli possono circolare su strada per il trasporto di prodotti agricoli per conto delle aziende agricole e forestali
Con la patente di categoria A si possono guidare...
[ F ] ...tutte le macchine agricole
Le macchine operatrici...
[ V ] ...possono essere veicoli sgombraneve
[ F ] ...possono circolare ad una velocit√† superiore a 50 km/h
[ V ] ...possono essere semoventi o trainate
[ V ] ...possono essere dotate di speciali attrezzature per l'esecuzione di operazioni agricole
[ F ] ...semoventi possono trasportare fino a quattro passeggeri
[ F ] ...a cingoli possono circolare ad una velocit√† superiore a 45 km/h
Per condurre macchine operatrici √® necessario essere titolari della patente di guida...
[ F ] ...della categoria A
Con la patente di categoria B si possono guidare...
[ F ] ...le macchine operatrici eccezionali
Argomento: Rimorchi e semirimorchi
I rimorchi leggeri sono...
[ F ] ...quelli di massa massima a pieno carico fino a 500 kg
[ V ] ...quelli di massa massima a pieno carico fino a 750 kg
I rimorchi sono...
[ F ] ...muniti di silenziatore
I rimorchi o i semirimorchi sono...
[ V ] ...veicoli privi di motore, destinati ad essere trainati
I semirimorchi sono...
[ F ] ...rimorchi privi di impianto frenante
I caravan (roulottes) sono...
[ F ] ...rimorchi destinati ai lavori agricoli
[ V ] ...rimorchi attrezzati per essere adibiti ad alloggio
[ V ] ...muniti di targa
[ F ] ...rimorchi destinati esclusivamente al trasporto di attrezzature turistiche e sportive
[ V ] ...utilizzabili come alloggio solo con veicolo fermo
E' possibile alloggiare...
[ F ] ...nei caravan (roulottes) durante la circolazione
Il caravan non √®...
[ F ] ...un rimorchio
L'autocaravan non √®...
[ V ] ...un rimorchio
L'autosnodato non √® classificato...
[ V ] ...rimorchio
Lezione: 01.4 Utenti deboli
Argomento: Anziani, ciechi e sordociechi
Bisogna usare maggiore prudenza nei confronti...
[ V ] ...delle persone anziane
[ V ] ...dei bambini che attraversano la strada
[ V ] ...delle persone diversamente abili
[ V ] ...delle persone in bicicletta e di quelle con scarsa capacit√† di movimento
[ V ] ...dei conducenti che dimostrano una guida incerta
[ V ] ...dei conducenti di veicoli adattati per persone diversamente abili
[ F ] ...dei pedoni muniti di bastone bianco, ma non di quelli con bastone bianco-rosso
[ F ] ...dei conducenti di autoveicoli elettrici
[ F ] ...dei conducenti di taxi
[ F ] ...dei conducenti di tricicli a motore
[ V ] ...delle donne in stato di gravidanza che attraversano la strada
[ V ] ...dei pedoni che spingono una carrozzina per bambini
Bisogna usare particolare prudenza nei confronti dei conducenti che hanno conseguito la patente di guida...
[ F ] ...in uno Stato estero
Quando le persone anziane attraversano la carreggiata bisogna...
[ F ] ...lampeggiare e suonare il clacson per farle attraversare rapidamente
[ V ] ...tenere presente che potrebbero fermarsi improvvisamente al centro della strada
[ V ] ...tenere presente che potrebbero non fare adeguata attenzione ai veicoli
[ F ] ...dare la precedenza solo a coloro che attraversano da sinistra a destra
[ V ] ...tenere presente che, data la loro et√†, non reagiscono prontamente alle situazioni di pericolo
[ V ] ...tenere presente che potrebbero non guardare n√© a destra, n√© a sinistra
[ V ] ...non avvicinarsi troppo con il veicolo, per evitare che si sentano minacciati e reagiscano con movimenti pericolosi
[ F ] ...tenere presente che, di solito, attraversano rapidamente e con prudenza
[ F ] ...tenere presente che hanno i riflessi pi√π rapidi e quindi attraversano con pi√π accortezza
[ F ] ...tenere presente che, avendo pi√π esperienza e un campo visivo maggiore, intuiscono meglio le situazioni di pericolo
Le persone anziane che attraversano la carreggiata sono...
[ V ] ...esposte a maggiori pericoli, perch√© le loro capacit√† visive e uditive non sono pi√π eccellenti
[ V ] ...esposte a maggiori pericoli, perch√© potrebbero valutare male la velocit√† dei veicoli che sopraggiungono
Se un pedone con bastone bianco attraversa la strada fuori dalle strisce pedonali...
[ F ] ...bisogna suonare il clacson per sollecitarlo ad attraversare rapidamente
Il conducente deve...
[ V ] ...fermarsi quando un pedone non vedente con il bastone bianco si accinge ad attraversare la strada, evitando di frenare bruscamente per non spaventarlo
[ V ] ...fermarsi e facilitare l'attraversamento al pedone non vedente con il bastone bianco che attraversa la strada fuori dalle strisce pedonali
[ V ] ...fermarsi e dare la precedenza al pedone non vedente con il bastone bianco che si accinge ad attraversare la strada fuori dalle strisce pedonali
[ V ] ...fermarsi per concedere la precedenza al pedone sordocieco che, con il bastone bianco-rosso, attraversa la strada fuori dalle strisce pedonali
[ V ] ...dare la precedenza al pedone non vedente con il bastone bianco che attraversa la strada fuori dalle strisce pedonali, anche se non √® accompagnato da un cane guida
[ V ] ...dare la precedenza al pedone con il bastone bianco o bianco-rosso che attraversa la strada, anche se √® fuori dalle strisce di un attraversamento pedonale
[ F ] ...accelerare per sgombrare rapidamente la carreggiata quando un pedone non vedente con il bastone bianco attraversa la strada senza cane guida
[ F ] ...passare per primo, in quanto ha la precedenza, quando un pedone non vedente con il bastone bianco attraversa la strada fuori dalle strisce pedonali
[ F ] ...prevedere che un pedone non vedente con il bastone bianco che attraversa la strada fuori dalle strisce pedonali camminer√† rapidamente e senza incertezza
[ F ] ...dare la precedenza a un pedone non vedente che attraversa la strada fuori dalle strisce pedonali, solo se munito di bastone bianco-rosso
[ V ] ...consentire ad una donna incinta di attraversare la strada senza metterle fretta
Il conducente, quando un pedone non vedente con il bastone bianco attraversa la strada fuori dalle strisce pedonali...
[ F ] ...deve dargli la precedenza solo se l'attraversamento pedonale dista oltre 100 metri
In vicinanza di un attraversamento pedonale,...
[ F ] ...il conducente deve considerare che un pedone munito di bastone bianco ha pi√π esperienza su come attraversare la carreggiata
[ F ] ...il conducente deve arrestarsi se il pedone che attraversa √® munito di bastone bianco-rosso; deve solo rallentare se, invece, √® munito di bastone bianco
[ V ] ...il conducente deve considerare che le reazioni dei bambini che attraversano sono imprevedibili e, quindi, possono creare pericolo
[ V ] ...il conducente deve considerare che i bambini potrebbero avanzare sulle strisce, per poi tornare indietro improvvisamente, senza motivo apparente
[ V ] ...il conducente deve considerare che i pedoni, in special modo i bambini, possono sbucare all'improvviso tra i veicoli parcheggiati
[ V ] ...il conducente deve considerare che i veicoli parcheggiati in prossimit√† delle strisce impediscono la visuale dei pedoni
[ F ] ...il conducente deve aspettarsi dai bambini una reazione rapida e un comportamento corretto
[ V ] ...il conducente deve considerare che le persone anziane solitamente attraversano lentamente e con difficolt√†
[ V ] ...il conducente deve considerare che il pedone potrebbe fermarsi improvvisamente sulle strisce dell'attraversamento pedonale
[ F ] ...il conducente deve accelerare quel tanto che basta per passare davanti al pedone che attraversa
[ V ] ...il conducente deve considerare che il pedone, nell'attraversare la strada, pu√≤ diventare insicuro e ritornare improvvisamente indietro
[ F ] ...il conducente deve considerare che i pedoni devono attraversare la strada affiancati, in modo da impiegare meno tempo
[ F ] ...il conducente deve considerare che se il pedone si √® fermato in mezzo alle strisce dell'attraversamento significa che ha rinunciato al suo diritto di passare
[ F ] ...i pedoni devono fare un cenno con la mano prima di iniziare l'attraversamento
Argomento: Bambini e donne incinte
Quando vi sono bambini fermi al semaforo...
[ V ] ...bisogna usare prudenza perch√© pu√≤ accadere che si spingano a vicenda, finendo sulla carreggiata
[ V ] ...bisogna usare prudenza perch√© potrebbero scendere dal marciapiede, invadendo la carreggiata, quando ancora per loro il semaforo √® disposto al rosso
[ V ] ...bisogna usare prudenza in quanto potrebbero attraversare improvvisamente la strada appena la luce del semaforo veicolare passa dal verde al giallo
[ V ] ...bisogna usare prudenza in quanto potrebbero attraversare velocemente la strada anche con il rosso, ritenendo che duri troppo 
[ F ] ...bisogna tenere presente che possono attraversare la strada solo se accompagnati da un adulto
[ F ] ...si pu√≤ essere certi che non attraverseranno la strada se il semaforo √® a luce gialla lampeggiante
[ F ] ...si pu√≤ essere certi che attraverseranno la strada solo quando il semaforo pedonale abbia la luce verde accesa
I bambini, al semaforo, possono attraversare la strada...
[ F ] ...solo dopo aver ricevuto un gesto di consenso da parte degli automobilisti
Prima di impegnare un incrocio, dopo che √® scattata la luce verde del semaforo...
[ V ] ...il conducente deve attendere che i pedoni abbiano finito di attraversare la strada
Alla guida di un veicolo, in vicinanza di una piazzola di fermata di autobus che trasporta/per scolari,...
[ V ] ‚Ä¶occorre fare attenzione ai bambini che potrebbero aver iniziato ad attraversare la carreggiata nascosti dall'autobus 
[ V ] ...occorre essere prudenti e tenere conto dei comportamenti imprevedibili dei bambini
[ V ] ...occorre fare attenzione ai bambini, che potrebbero attraversare di corsa la strada per salire sullo scuolabus
[ V ] ...occorre prepararsi a frenare, nel caso in cui dei bambini attraversino improvvisamente la strada
[ F ] ...non √® necessario rallentare se lo scuolabus √® fermo
[ F ] ...occorre suonare per invitare i bambini che attraversano sulle strisce a dare la precedenza
[ F ] ...non si deve rallentare, per evitare di ostacolare la circolazione degli altri veicoli
[ F ] ...si deve rallentare solo se vi sono bambini che attraversano
[ V ] ...bisogna rallentare particolarmente se vi √® lo scuolabus
[ F ] ...occorre fare attenzione allo scuolabus, che dopo la fermata far√† sicuramente retromarcia
[ F ] ...occorre passare per primi, avendo sempre la precedenza sui bambini che attraversano la strada
[ F ] ...non si pu√≤ proseguire nella marcia se le portiere dello scuolabus sono ancora aperte
In vicinanza di una piazzola di fermata di autobus per scolari...
[ V ] ...pu√≤ accadere che i bambini scendano dall'autobus senza fare attenzione ai veicoli che sopraggiungono
Quando una donna in stato di gravidanza attraversa la carreggiata...
[ F ] ...bisogna darle la precedenza solo se attraversa da sinistra a destra
[ F ] ...bisogna tenere presente che ha il passo pi√π rapido e quindi attraversa velocemente 
[ V ] ...non bisogna avvicinarsi troppo con il veicolo, per evitare di spaventarla
E' consentito posteggiare un veicolo davanti agli scivoli del marciapiede...
[ F ] ...solo dalle ore 22.00 alle ore 8.00
Quando un pedone che spinge la/una carrozzina per bambini attraversa la carreggiata...
[ F ] ...bisogna dargli la precedenza solo se attraversa da sinistra a destra
[ F ] ...bisogna tenere presente che, di solito, attraversa rapidamente
Quando si parcheggia un veicolo √® vietato ostruire...
[ V ] ...eventuali scivoli del marciapiede per non impedire il passaggio di pedoni che spingono una carrozzina per bambini
E' consentito lasciare il veicolo in sosta sul marciapiede...
[ F ] ...senza lasciare spazio ai pedoni che spingono una carrozzina per bambini
Argomento: Pedoni e ciclisti
Il conducente, di notte...
[ F ] ...non deve dare la precedenza ai pedoni che attraversano sulle strisce pedonali
Quando la carreggiata √® occupata da ciclisti o pedoni...
[ V ] ...per sorpassarli √® prudente mantenere un'adeguata distanza di sicurezza laterale
[ V ] ...non √® prudente sorpassarli se non si pu√≤ rispettare una distanza laterale sufficiente
[ F ] ...si devono sorpassare senza superare la velocit√† di 30 km/h
E' vietato sorpassare...
[ F ] ...ciclisti o pedoni che occupano la carreggiata
Poich√© la marcia dei ciclisti a volte avviene con leggeri sbandamenti...
[ V ] ...il conducente di un veicolo deve tener conto di tale particolarit√†, in caso di sorpasso
Il conducente che intende sorpassare ciclisti o pedoni che occupano la carreggiata...
[ V ] ...deve usare molta prudenza
[ F ] ...deve mantenere una distanza laterale di almeno 2 metri
Quando la carreggiata extraurbana √® occupata da ciclisti o pedoni...
[ V ] ...√® consigliabile suonare il clacson prima di sorpassarli
Il conducente, in vicinanza di un posteggio riservato ai taxi...
[ V ] ...deve fare attenzione ai pedoni, che possono attraversare improvvisamente la strada senza le dovute precauzioni
[ V ] ...deve fare attenzione ai pedoni che salgono o scendono dal taxi
[ V ] ...deve rallentare ed eventualmente fermarsi se vi sono pedoni che attraversano la strada, senza guardare
[ F ] ...deve dare la precedenza ai taxi in partenza, qualora s'immettano dal lato sinistro della carreggiata
[ F ] ...deve dare la precedenza ai taxi che s'immettono sulla strada
Lezione: 02.1 Segnali di Pericolo
Argomento: Strada deformata (001)
Il segnale raffigurato (001) √® un segnale di...
[ V ] ...pericolo
[ F ] ...prescrizione
Il segnale raffigurato (001) preannuncia...
[ F ] ...pi√π curve consecutive
[ F ] ...una discesa pericolosa
[ V ] ...un tratto di strada deformata
[ V ] ...un tratto di strada con pavimentazione irregolare
[ V ] ...un tratto di strada dissestata
[ V ] ...una strada in cattivo stato
[ F ] ...una serie di dossi
[ F ] ...una forte variazione di pendenza della strada
[ F ] ...un tratto di strada a visibilit√† limitata
[ F ] ...un dosso
[ F ] ...una doppia curva
Il segnale raffigurato (001)...
[ V ] ...si trova, in genere, 150 metri prima di un tratto di strada con fondo irregolare
[ V ] ...pu√≤ essere associato con un segnale di limite massimo di velocit√†
[ V ] ‚Ä¶se a fondo giallo √® usato in presenza di cantieri stradali
[ F ] ...indica un tratto di strada deformata lungo 320 metri
[ V ] ...indica un tratto di strada deformata lungo 380 metri
In presenza del segnale raffigurato (001)...
[ V ] ...√® necessario tenere saldamente il volante, per controllare possibili sbandamenti
[ V ] ...√® importante prevedere eventuali sbandamenti dei veicoli provenienti dal senso opposto
[ F ] ...√® necessario fare attenzione al restringimento della carreggiata
[ F ] ...√® obbligatorio circolare al centro della carreggiata
[ V ] ...√® necessario circolare a velocit√† moderata se si traina un rimorchio
Argomento: Dosso (002)
Il segnale raffigurato (002) √® un segnale di...
[ V ] ...√® un segnale di pericolo
[ F ] ...√® un segnale di obbligo
[ F ] ...√® un segnale di precedenza 
Il segnale raffigurato (002) preannuncia...
[ F ] ...l'ingresso in una galleria
[ V ] ...un dosso
[ V ] ...una salita, seguita da una discesa
[ V ] ...una variazione di pendenza della strada con limitata visibilit√†
[ F ] ...un tratto di strada deformata
[ F ] ...un tratto di strada con pavimentazione irregolare
[ F ] ...un ponte
[ F ] ...una cunetta
[ F ] ...un tratto di strada in cattivo stato
[ V ] ...un tratto di strada pericoloso per limitata visibilit√†
[ F ] ...lavori in corso
Il segnale raffigurato (002)...
[ V ] ...√® posto, di norma, 150 metri prima di un dosso
[ F ] ...vieta il transito degli autobus
[ V ] ...pu√≤ presegnalare dossi artificiali
In presenza del segnale raffigurato (002)...
[ V ] ...bisogna considerare che la visibilit√† √® limitata
[ V ] ...√® necessario moderare la velocit√† in relazione alla visibilit√†
[ V ] ...√® vietato il sorpasso sul tratto in salita, se la strada √® a doppio senso di circolazione con due sole corsie
[ F ] ...√® vietato il sorpasso nel tratto in discesa
[ V ] ...sono vietate la sosta e la fermata sia sul tratto in salita che su quello in discesa
[ F ] ...√® possibile effettuare l'inversione di marcia nel tratto in discesa
[ V ] ...√® vietata l'inversione di marcia
Argomento: Cunetta (003)
Il segnale raffigurato (003) preannuncia...
[ F ] ...un dosso
[ V ] ...un tratto di strada pericoloso a causa di una cunetta
[ V ] ...una cunetta
[ F ] ‚Ä¶un tratto di strada in cattivo stato
[ F ] ...un tratto di strada con pavimentazione irregolare
[ V ] ...un tratto di strada che potrebbe allagarsi in caso di forti piogge
[ F ] ...una banchina cedevole
[ F ] ...un restringimento della carreggiata
[ F ] ...una strada deformata
Il segnale raffigurato (003)...
[ V ] ...√® un segnale di pericolo
[ V ] ...si trova prima di un tratto in discesa seguito da uno in salita
[ F ] ...pu√≤ trovarsi prima di un tratto in salita seguito da una discesa
[ F ] ...indica una banchina cedevole
In presenza del segnale raffigurato (003)...
[ V ] ...√® necessario moderare la velocit√† per mantenere il controllo del veicolo
[ V ] ...√® necessario moderare la velocit√† per evitare danni alle sospensioni
[ V ] ...√® necessario tenere il volante con una presa pi√π sicura
[ V ] ...e in caso di pioggia √® necessario prevedere la possibilit√† di accumulo di acqua nella cunetta
[ V ] ...√® necessario prevedere la possibilit√† di accumulo di fango e detriti nella cunetta
[ F ] ...√® necessario rallentare solo se provengono veicoli dal senso opposto
[ F ] ...√® vietato il sorpasso se si circola in una strada a senso unico
[ F ] ...non √® necessario rallentare se la cunetta presenta visibilit√†
Argomento: Curva pericolosa a destra (004)
Il segnale raffigurato (004) preannuncia...
[ F ] ...un cambio di corsia
[ V ] ...una curva pericolosa a destra
[ F ] ...una curva a sinistra
[ V ] ...un tratto di strada pericoloso per ridotta visibilit√†
[ F ] ...un obbligo di svolta a destra
[ V ] ...un tratto di strada pericoloso
[ F ] ...una serie di curve pericolose di cui la prima a destra
[ V ] ...un tratto di strada in cui √® necessario regolare la velocit√† in relazione alla visibilit√† e al raggio della curva
[ V ] ...un tratto di strada in cui √® necessario percorrere la curva con pi√π attenzione se la strada √® bagnata
[ F ] ...un tratto di strada in cui √® consentito sorpassare i motocicli, anche superando di poco la striscia bianca continua
[ F ] ...un tratto di strada in cui √® consentito sorpassare i motocicli, anche invadendo la corsia opposta
[ F ] ...un tratto di strada a due corsie e doppio senso di circolazione in cui √® consentito sorpassare i motocicli, senza superare la striscia bianca continua
[ V ] ...un tratto di strada in cui non √® consentito il sorpasso se la carreggiata √® a doppio senso di circolazione e con due sole corsie
[ F ] ...un tratto di strada in salita
[ F ] ...un tratto di strada in cui √® consentita la fermata, ma non la sosta
[ F ] ...un tratto di strada in cui √® consentito effettuare l'inversione di marcia
[ F ] ...un tratto di strada in cui √® consentito effettuare manovre di retromarcia
Il segnale raffigurato (004)...
[ V ] ...richiede di moderare la velocit√†
[ F ] ...√® posto, di norma, a 5 metri dall'inizio della curva
[ V ] ...√® posto, di norma, a 150 metri dal punto di inizio della curva
[ F ] ...√® un segnale di prescrizione
[ V ] ...pu√≤ essere integrato con pannello con la scritta TORNANTE
[ F ] ‚Ä¶posto su una strada a doppio senso di circolazione, impone di portarsi sulla parte sinistra della carreggiata per affrontare meglio la curva
In presenza del segnale raffigurato (004)...
[ F ] ...si deve circolare il pi√π possibile vicino alla striscia bianca che separa i sensi di marcia
[ V ] ...si deve viaggiare ad andatura particolarmente moderata se si circola con il ruotino (ruota di soccorso)
[ V ] ...posto su strada a doppio senso di circolazione e con due sole corsie, si deve circolare il pi√π possibile vicino al margine destro
Argomento: Curva pericolosa a sinistra (005)
La figura rappresenta (005)...
[ V ] ...un segnale di pericolo
[ F ] ...un divieto di svolta a sinistra
[ F ] ...un segnale di obbligo
[ F ] ...un segnale di prescrizione
Il segnale raffigurato (005) preannuncia...
[ V ] ...un tratto di strada che curva a sinistra con limitata visibilit√†
[ V ] ...una curva pericolosa a sinistra
[ V ] ...di norma a 150 metri, una curva pericolosa
[ V ] ...un tratto di strada pericoloso per ridotta visibilit√†
[ V ] ...un tratto di strada non rettilineo, che limita la visibilit√†
[ F ] ...un ostacolo da aggirare a sinistra
Il segnale raffigurato (005)...
[ F ] ...indica una deviazione per cantiere di lavoro
[ F ] ...indica una circolazione rotatoria
[ F ] ...impone di circolare il pi√π vicino possibile al centro della strada
[ F ] ...impone l'obbligo di mantenere la sinistra
[ V ] ...richiede di moderare la velocit√† per potersi arrestare in caso di un ostacolo improvviso
In presenza del segnale raffigurato (005)...
[ V ] ...√® necessario regolare la velocit√† in relazione alla visibilit√† e al raggio della curva
[ V ] ...si deve viaggiare ad andatura particolarmente moderata se si circola con il "ruotino" (ruota di soccorso)
[ V ] ...non √® consentito sorpassare altri veicoli su una carreggiata a doppio senso di circolazione con due sole corsie
[ F ] ...√® consentito effettuare l'inversione di marcia
[ F ] ...√® consentita la fermata ma non la sosta
[ F ] ...√® consentito effettuare manovre di retromarcia
[ V ] ...√® necessario percorrere la curva con pi√π attenzione se la strada √® bagnata
[ F ] ...non √® consentito il transito ai veicoli con il "ruotino" (ruota di soccorso)
[ V ] ...su una strada a doppio senso di circolazione con due sole corsie, si deve circolare il pi√π possibile vicino al margine destro
[ F ] ...su strada a doppio senso di circolazione a due corsie, √® consentito sorpassare i motocicli senza invadere la corsia opposta
[ F ] ...su strada a senso unico di circolazione si deve marciare il pi√π possibile vicino al margine destro della carreggiata
Argomento: Doppia curva pericolosa la prima a destra (006)
La figura rappresenta (006)...
[ V ] ...un segnale di pericolo
Il segnale raffigurato (006)...
[ V ] ...pu√≤ essere integrato con il pannello in figura
[ V ] ...pu√≤ essere integrato con un pannello indicante TORNANTI
[ V ] ...richiede di moderare la velocit√† per potersi arrestare in caso di un ostacolo improvviso
Il segnale raffigurato (006) preannuncia...
[ V ] ...di norma a 150 metri, una doppia curva pericolosa
[ F ] ...un raccordo di uscita autostradale
[ F ] ...una deviazione per lavori in corso
[ F ] ...un incrocio
[ F ] ...una discesa pericolosa
[ F ] ...un tratto di strada con superficie sdrucciolevole
[ F ] ...un tratto di strada con pavimentazione irregolare
[ V ] ...un tratto di strada non rettilineo che limita la visibilit√†
[ V ] ...una doppia curva pericolosa, la prima a destra
[ F ] ...un tratto di strada in cui √® consentita l'inversione di marcia
[ F ] ...un tratto di strada in cui √® consentita la manovra di retromarcia
Il segnale con il pannello in figura (006) preannuncia...
[ F ] ...un tratto di strada lungo 3,8 km con una serie di curve pericolose
In presenza del segnale raffigurato (006)...
[ V ] ...√® necessario regolare la velocit√† in relazione alla visibilit√† e al raggio delle curve
[ V ] ...√® necessario percorrere le curve con pi√π attenzione in caso di pioggia
[ V ] ...√® necessario regolare la velocit√† in relazione alle condizioni di carico del veicolo
[ F ] ...√® necessario tenere una velocit√† moderata esclusivamente nella prima curva
[ V ] ...bisogna moderare la velocit√†
[ F ] ...√® consentito effettuare la fermata in curva
[ F ] ...√® consentito sorpassare motocicli e ciclomotori su strada a due corsie e a doppio senso di circolazione
[ F ] ...posto su strada a due corsie e a doppio senso di circolazione, √® consentito sorpassare nelle ore diurne
Su strada a due (sole) corsie e a doppio senso di circolazione, in presenza del segnale raffigurato (006)...
[ V ] ...√® opportuno fare particolare attenzione ai veicoli provenienti dal senso opposto
[ V ] ...si deve marciare il pi√π possibile vicino al margine destro
Nella curve pericolose preannunciate dal segnale raffigurato (006)...
[ V ] ...√® vietato il sorpasso se la carreggiata √® a due corsie e a doppio senso di circolazione
Argomento: Doppia curva pericolosa la prima a sinistra (007)
La figura rappresenta (007)...
[ V ] ...un segnale di pericolo
Il segnale raffigurato (007)...
[ V ] ...richiede di moderare la velocit√†
Il segnale raffigurato preannuncia (007)...
[ F ] ...una deviazione per lavori in corso
[ F ] ...un tratto di strada con una serie di dossi
[ F ] ...un tratto di carreggiata sdrucciolevole
[ F ] ...una strettoia
[ F ] ...un tratto di strada deformata
[ V ] ...in genere a 150 m, una doppia curva pericolosa
[ V ] ...un tratto di strada non rettilineo che limita la visibilit√†
[ V ] ...una doppia curva pericolosa, la prima a sinistra
[ F ] ...una confluenza a sinistra
[ V ] ...la presenza di tornanti se integrato con apposito pannello
In presenza del segnale raffigurato (007)...
[ V ] ...√® necessario regolare la velocit√† in relazione alla visibilit√† e al raggio delle curve
[ F ] ...√® consentita la manovra di retromarcia
[ V ] ...√® necessario percorrere le curve con pi√π attenzione in caso di pioggia
[ F ] ...√® consentita l'inversione di marcia
[ F ] ...√® consentito effettuare la fermata in corrispondenza delle curve
[ V ] ...√® necessario regolare la velocit√† in relazione alle condizioni di carico del veicolo
[ V ] ...√® opportuno fare particolare attenzione ai veicoli provenienti dal senso opposto
[ V ] ...non √® consentito effettuare manovre di sorpasso su strade a due sole corsie e a doppio senso di circolazione
[ F ] ...√® consentito sorpassare motocicli e ciclomotori su strade a due corsie e a doppio senso
[ V ] ...si deve circolare il pi√π vicino possibile al margine destro della carreggiata, su strada a due sole corsie e a doppio senso di circolazione
[ F ] ...√® necessario tenere una velocit√† moderata esclusivamente nella prima curva
[ F ] ...posto su strade a due corsie e a doppio senso, √® consentito sorpassare un veicolo molto lento
`;

        // SVG Factory
        const getSignalSVG = (code) => {
            const base = `<svg viewBox="0 0 100 100" class="sign-svg"><path d="M50 5 L95 90 L5 90 Z" fill="white" stroke="#cc0000" stroke-width="8" stroke-linejoin="round"/>`;
            const paths = {
                '001': '<path d="M25 70 Q35 50 50 70 Q65 50 75 70" fill="none" stroke="black" stroke-width="8" stroke-linecap="round" />',
                '002': '<path d="M25 70 Q50 30 75 70" fill="none" stroke="black" stroke-width="12" stroke-linecap="round" />',
                '003': '<path d="M25 50 Q50 90 75 50" fill="none" stroke="black" stroke-width="12" stroke-linecap="round" />',
                '004': '<path d="M40 75 V55 Q40 40 70 45 L65 35 L80 50 L65 65 L70 55 Q50 50 50 75" fill="black" />',
                '005': '<path d="M60 75 V55 Q60 40 30 45 L35 35 L20 50 L35 65 L30 55 Q50 50 50 75" fill="black" />',
                '006': '<path d="M35 75 V60 Q35 45 50 45 Q65 45 65 35 L55 35 L70 20 L85 35 L75 35 Q75 55 50 55 Q45 55 45 75" fill="black" />',
                '007': '<path d="M65 75 V60 Q65 45 50 45 Q35 45 35 35 L45 35 L30 20 L15 35 L25 35 Q25 55 50 55 Q55 55 55 75" fill="black" />'
            };
            return paths[code] ? base + paths[code] + '</svg>' : null;
        };

        const app = {
            data: { lessons: [] },
            queue: [],
            idx: 0,
            streak: 0,
            isBusy: false,

            init() {
                this.parseData();
                this.renderSelectionList();
                this.renderPatternContent();
            },

            cleanText(t) { return t.replace(/‚Ä¶/g, '...').replace(/‚Ä¢/g, '').trim(); },

            parseData() {
                const lines = RAW_TEXT.split('\n').map(l => l.trim()).filter(l => l.length > 0);
                let lesson = null, topic = null, root = null;
                
                lines.forEach(line => {
                    try {
                        if (line.startsWith('Lezione:')) {
                            lesson = { id: this.data.lessons.length, title: this.cleanText(line.replace('Lezione:', '')), topics: [] };
                            this.data.lessons.push(lesson);
                            topic = null; root = null;
                        } else if (line.startsWith('Argomento:')) {
                            if (!lesson) { 
                                lesson = { id: 0, title: "Generale", topics: [] };
                                this.data.lessons.push(lesson);
                            }
                            const imgMatch = line.match(/\((\d{3})\)/);
                            const imgCode = imgMatch ? imgMatch[1] : null;
                            const titleClean = this.cleanText(line.replace('Argomento:', '').replace(/\(\d{3}\)/, ''));
                            topic = { title: titleClean, imageCode: imgCode, roots: [] };
                            lesson.topics.push(topic);
                            root = null;
                        } else if (line.match(/^\[\s*[VF]\s*\]/i)) {
                            if (root) {
                                const isTrue = line.includes('V');
                                const text = this.cleanText(line.substring(line.indexOf(']') + 1));
                                root.items.push({ text, isTrue });
                            }
                        } else if (!line.startsWith('Listato') && !line.startsWith('Metodo:')) {
                            if (topic) {
                                root = { text: this.cleanText(line), items: [] };
                                topic.roots.push(root);
                            }
                        }
                    } catch(e) { console.warn("Parse error", e); }
                });
            },

            // --- NAVIGATION ---
            switchView(viewId) {
                // Logic: 
                // Home is base (z-10). 
                // Game (z-20) slides over.
                // Pattern (z-20) slides over.
                // Selection (z-30) slides over everything.

                if(viewId === 'view-home') {
                    // Slide everything else away
                    document.getElementById('view-game').style.transform = 'translateX(100%)';
                    document.getElementById('view-pattern').style.transform = 'translateX(100%)';
                    document.getElementById('view-selection').style.transform = 'translateX(100%)';
                } else if(viewId === 'view-game') {
                    document.getElementById('view-game').style.transform = 'translateX(0%)';
                    document.getElementById('view-pattern').style.transform = 'translateX(100%)';
                    document.getElementById('view-selection').style.transform = 'translateX(100%)';
                } else if(viewId === 'view-pattern') {
                    document.getElementById('view-pattern').style.transform = 'translateX(0%)';
                    document.getElementById('view-selection').style.transform = 'translateX(100%)';
                    // Game stays where it is (behind pattern potentially) or slides out? Let's slide out to be clean
                    document.getElementById('view-game').style.transform = 'translateX(100%)';
                } else if (viewId === 'view-selection') {
                    document.getElementById('view-selection').style.transform = 'translateX(0%)';
                }

                // Nav Active State
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                if(viewId === 'view-game') document.getElementById('nav-game').classList.add('active');
                if(viewId === 'view-pattern') document.getElementById('nav-pattern').classList.add('active');
                if(viewId === 'view-home') document.getElementById('nav-home').classList.add('active');
            },

            goToHome() { this.switchView('view-home'); },
            goToSelection() { this.switchView('view-selection'); },
            goToPattern() { this.switchView('view-pattern'); },
            resumeGame() { 
                if(this.queue.length > 0) this.switchView('view-game'); 
                else this.startMix();
            },

            // --- GAME START ---
            startMix() {
                this.queue = [];
                this.data.lessons.forEach(l => l.topics.forEach(t => t.roots.forEach(r => r.items.forEach(i => 
                    this.queue.push({ lesson: l.title, topic: t.title, root: r.text, completion: i.text, isTrue: i.isTrue, imageCode: t.imageCode })
                ))));
                this.queue.sort(() => Math.random() - 0.5);
                this.startGame("Mix Mode");
            },

            startCustom() {
                const selectedIds = Array.from(document.querySelectorAll('#selection-list input:checked')).map(cb => parseInt(cb.value));
                if (selectedIds.length === 0) return alert("Seleziona almeno una lezione!");
                
                this.queue = [];
                const lessons = this.data.lessons.filter(l => selectedIds.includes(l.id));
                lessons.forEach(l => l.topics.forEach(t => t.roots.forEach(r => r.items.forEach(i => 
                    this.queue.push({ lesson: l.title, topic: t.title, root: r.text, completion: i.text, isTrue: i.isTrue, imageCode: t.imageCode })
                ))));
                
                this.startGame("Focus Mode");
            },

            startGame(modeName) {
                this.idx = 0;
                this.streak = 0;
                this.isBusy = false;
                document.getElementById('streak-display').innerText = '0';
                document.getElementById('header-mode').innerText = modeName;
                this.switchView('view-game');
                this.renderCard();
            },

            // --- GAMEPLAY ---
            renderCard() {
                if (this.idx >= this.queue.length) {
                    document.getElementById('card-comp').innerText = "Hai completato la sessione!";
                    document.getElementById('card-root').innerText = "Ottimo lavoro üéâ";
                    document.getElementById('signal-container').classList.add('hidden');
                    confetti();
                    return;
                }

                const item = this.queue[this.idx];
                const imgContainer = document.getElementById('signal-container');
                
                if (item.imageCode) {
                    const svg = getSignalSVG(item.imageCode);
                    if (svg) {
                        imgContainer.innerHTML = svg;
                        imgContainer.classList.remove('hidden');
                    } else {
                        imgContainer.classList.add('hidden');
                    }
                } else {
                    imgContainer.classList.add('hidden');
                }

                document.getElementById('card-root').innerText = item.root;
                document.getElementById('game-topic').innerText = item.topic;
                
                const compEl = document.getElementById('card-comp');
                compEl.innerText = item.completion;
                compEl.classList.remove('anim-pop');
                void compEl.offsetWidth; 
                compEl.classList.add('anim-pop');

                document.getElementById('progress-bar').style.width = `${(this.idx / this.queue.length) * 100}%`;
            },

            answer(choice) {
                if (this.isBusy || this.idx >= this.queue.length) return;
                this.isBusy = true;

                const item = this.queue[this.idx];
                const isCorrect = choice === item.isTrue;
                const flash = document.getElementById('feedback-flash');
                const icon = document.getElementById('fb-icon');
                const text = document.getElementById('fb-text');

                // Visual Feedback - Transparent flash, NOT opaque
                flash.classList.remove('hidden');
                flash.classList.add('flex');
                
                if (isCorrect) {
                    this.streak++;
                    flash.className = "absolute inset-0 z-50 flex flex-col items-center justify-center bg-green-500/20 backdrop-blur-sm transition-all duration-200";
                    icon.className = "ph-fill ph-check-circle text-green-400 drop-shadow-md";
                    text.innerText = "CORRETTO";
                    text.className = "text-3xl font-black text-green-100 uppercase tracking-widest drop-shadow-md";
                    confetti({ particleCount: 20, spread: 50, origin: { y: 0.7 } });
                } else {
                    this.streak = 0;
                    flash.className = "absolute inset-0 z-50 flex flex-col items-center justify-center bg-red-500/20 backdrop-blur-sm transition-all duration-200";
                    icon.className = "ph-fill ph-x-circle text-red-400 drop-shadow-md";
                    text.innerText = "ERRATO";
                    text.className = "text-3xl font-black text-red-100 uppercase tracking-widest drop-shadow-md";
                    document.getElementById('card-container').classList.add('anim-shake');
                    setTimeout(() => document.getElementById('card-container').classList.remove('anim-shake'), 400);
                }

                document.getElementById('streak-display').innerText = this.streak;

                setTimeout(() => {
                    flash.classList.add('hidden');
                    flash.classList.remove('flex');
                    this.idx++;
                    this.renderCard();
                    this.isBusy = false;
                }, 700);
            },

            // --- RENDERING LISTS ---
            renderSelectionList() {
                const container = document.getElementById('selection-list');
                container.innerHTML = '';
                this.data.lessons.forEach(l => {
                    container.innerHTML += `
                        <label class="flex items-center p-4 rounded-xl bg-white/5 border border-white/10 active:bg-white/10 transition-colors cursor-pointer">
                            <input type="checkbox" value="${l.id}" class="w-5 h-5 accent-purple-500 rounded mr-4" checked>
                            <span class="text-sm font-bold text-gray-200">${l.title}</span>
                        </label>`;
                });
            },

            renderPatternContent() {
                const container = document.getElementById('pattern-content');
                let html = '';
                this.data.lessons.forEach(l => {
                    l.topics.forEach(t => {
                        const svg = t.imageCode ? `<div class="mb-2 text-center">${getSignalSVG(t.imageCode)}</div>` : '';
                        html += `
                            <div class="glass rounded-2xl p-5 border border-white/5">
                                ${svg}
                                <h3 class="text-xs font-bold text-purple-400 uppercase tracking-wider mb-3 text-center border-b border-white/5 pb-2">${t.title}</h3>
                                ${t.roots.map(r => `
                                    <div class="mb-4 last:mb-0">
                                        <p class="text-sm text-gray-400 mb-2 font-medium">${r.text}</p>
                                        <div class="space-y-2 pl-2 border-l-2 border-white/10">
                                            ${r.items.map(i => `
                                                <div class="flex items-start gap-2">
                                                    <i class="ph-fill ${i.isTrue ? 'ph-check-circle text-green-500' : 'ph-x-circle text-red-500'} mt-0.5 shrink-0"></i>
                                                    <span class="text-sm text-gray-200 leading-snug">${i.text}</span>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    });
                });
                container.innerHTML = html;
            }
        };

        window.onload = () => app.init();
    </script>
</body>
</html>
